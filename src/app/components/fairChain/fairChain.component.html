<mat-card class="application-head">
  <button mat-button class="buttonsToolbarAbove" (click)="exportGraph()">Export</button>
  <button mat-button class="buttonsToolbarAbove" (click)="hiddenfileinput.click()"> Import</button>
  <button mat-button class="buttonsToolbarAbove" (click)="undo()"> Undo</button>
  <button mat-button class="buttonsToolbarAbove" (click)="redo()"> Redo</button>
  <button mat-button class="buttonsToolbarAbove" (click)="__debug__()" *ngIf="isDebugging"> Debug</button>
  <button mat-button class="option-button" (click)= "downloadGraphAsJpeg()">Download As Jpeg</button>
  <button mat-button class="buttonsToolbarAbove" (click)= "hiddenlogoinput.click()"> Import Logo</button>

  <input type="file" id=fileToImport class="file-upload" accept="image/*" (change)="importLogo($event.target.files)" #hiddenlogoinput>
  <input type="file" id=fileToImport class="file-upload" (change)="importGraph($event.target.files)" #hiddenfileinput>
</mat-card>

<mat-card class="application-body">
  <!-- Holds primary tools of the application -->
  <mat-card #toolbar class="toolbar">
    <div>
      <a #addNodeButton (click)="addNodeInNetwork()" [class.active]="isAddingNode()" class="tool">
        <img class="icon-link" src="assets/icons/addnodeicon.png">
      </a>
    </div>

    <hr>
    <div>
      <a #addEdgeButton (click)="addEdgeInNetwork()" [class.active]="isAddingEdge()" class="tool">
        <img class="icon-link" src="assets/icons/addedgeicon.png">
      </a>
    </div>

    <hr>
    <div>
      <a #deleteSelectionButton (click)="deleteNodeOrEdgeInNetwork()" class="tool">
        <img class="icon-link" src="assets/icons/deleteselectionicon.png">
      </a>
    </div>
    <hr>
  </mat-card>

  <!-- Container of Network canvas -->
  <mat-card class="canvas" id=networkContainer>
    <div [hidden]="!isMetadataVisible">
      <mat-form-field class="metadataField">
        <mat-label></mat-label>
        <textarea matInput class="description" 
          [(ngModel)]="metadata" 
          placeholder="Enter Description" 
          cdkTextareaAutosize
          cdkAutosizeMinRows="1" 
          cdkAutosizeMaxRows="5">
        </textarea>
      </mat-form-field>
    </div>
    <div #graph class="graph"></div>
  </mat-card>

  <!-- Detailed options for a tool -->
  <mat-card #toolbar_options class="toolbar-options">
    <mat-drawer-container class="drawer-container" [hasBackdrop]="false">
      <mat-drawer-content class="drawer-content">
    <!-- Text Area for Node Label -->
    <p class="option-label">Label</p>
    <textarea class = "option-textArea" [(ngModel)]="nodeEdgeLabel"></textarea>
    <br>
    <!-- Alternate change Node name mode -->
    <button mat-button 
      class = "option-button"
      [class.active] = "isChangingNodeLabel()" 
      (click)="changeNodeName(); changeEdgeName()">Change Name</button>
    <hr>
    <div>
      <!-- Implements te color toolbar and button to change node/edge colors -->
        <p class="option-label">Color</p>
        <input matInput class = "option-colorInput" type="color" [(ngModel)]="nodeEdgeColor">
      <br>
      <!-- Alternate change Node color mode -->
      <button mat-button
              class="option-button"
              [class.active]="isChangingColor()"
              (click)="changeNodeColor(); changeEdgeColor()">Change Color
      </button>
      <hr>
    </div>
    <div>
      <p class="option-label">Flag</p>

        <mat-drawer #drawer class="drawer" mode="over" position="end">
          <mat-radio-group
            [(ngModel)]="nodeFlag">
            <mat-radio-button class="radio-flags" *ngFor="let emoji of emojis" [value]="emoji" (click)="drawer.close()">
              {{emoji}}
            </mat-radio-button>
          </mat-radio-group>
        </mat-drawer>
        <button mat-button class="option-button" (click)="drawer.toggle()">
          Choose Flag
        </button>

      <br>
      <button mat-button class="option-button" [class.active] = "isChangingFlag()" (click)= "changeFlag()">Apply Flag</button>
      <button mat-button class="option-button" [class.active] = "isDeletingFlag()" (click)= "deleteFlag()">Delete Flag</button>
      <hr>
      <p class="option-label-metadata">Show Metadata</p>
      <div class="option-toggle" >
        <mat-slide-toggle [(ngModel)]="isMetadataVisible" color="primary"></mat-slide-toggle>
      </div>
      <hr>
    </div>
  </mat-drawer-content>
  </mat-drawer-container>  
  </mat-card>

</mat-card>

<relabel-pop-up *ngIf="isRelabelPopUpVisible()"
                [info]='relabelPopUpInfo.rect'
                [(label)]="relabelPopUpInfo.label"
                (closeRelabelPopUp)="closeNodeRelabelPopUp()"></relabel-pop-up>
